date: 2025-09-06
title: v1.0.4
commits: 4a3dc0d
reviewed: true
---

# Static Serving & Proxy Host Improvements

## ğŸš€ Server & Config

**Static file serving**
- Serve Admin and User UIs directly from the API in production with safe path resolution and correct content types

**Proxy and origins**
- More robust proxy host resolution, CORS handling, and dev vs. production behavior for both Admin and User servers

**Theme bootstrap in config**
- Inject light/dark theme bootstrap via `/config.js` for consistent initial render across UIs

**OpenAPI dependency**
- Moved `zod-to-openapi` to runtime dependencies for stable OpenAPI document generation

## ğŸ“° Changelog Delivery

**Admin UI**
- Fetches changelog from `darkauth.com`; removed local dev/build changelog route

**Brochure Site**
- Dropped changelog plugin; generate changelog JSON via a dedicated script

**Docs**
- Clarified how changelog hosting works and where the Admin UI reads from

## ğŸ–¼ï¸ Brochure Site

**Themeâ€‘aware screenshots**
- Added light/dark theme screenshots and an inâ€‘site viewer

## ğŸ› ï¸ Docker & CI

**Docker image**
- Included changelog in image; run API with pm2; copy Drizzle directory into the container

**CI/CD**
- Added screenshot build step and pipeline tweaks

## ğŸ§ª Test Suite

**Visual runs**
- Added light/dark screenshot runs with configurable color scheme

**Stability**
- Bumped reload token and refined screenshot scripts; ignored generated artifacts

## ğŸ§¹ Maintenance

**Changelog tooling**
- Fixes to changelog generation and formatting scripts
