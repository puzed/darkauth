date: 2025-09-06
title: v1.0.4
commits: 4a3dc0d
reviewed: true
---

This release delivers production-ready static file serving, enhanced proxy handling, and theme-aware screenshots for better documentation.

## âœ¨ Features

### ğŸš€ Production Static Serving
- **Unified serving architecture** - Serve Admin and User UIs directly from the API in production
- **Secure path resolution** - Safe file serving with correct content types and path validation
- **Enhanced proxy handling** - Robust proxy host resolution with proper CORS handling
- **Environment-aware behavior** - Smart dev vs. production behavior for both Admin and User servers

### ğŸ¨ Theme System
- **Theme bootstrapping** - Inject light/dark theme bootstrap via `/config.js` for flicker-free initial renders
- **Theme-aware screenshots** - Added light/dark theme screenshots with in-site viewer
- **Visual testing** - Light/dark screenshot runs with configurable color schemes

### ğŸ“¦ Changelog Distribution
- **Centralized changelog hosting** - Admin UI fetches changelog from `darkauth.com`
- **Automated generation** - Generate changelog JSON via dedicated script
- **Removed local routes** - Eliminated local dev/build changelog routes for cleaner architecture

## ğŸ› ï¸ Improvements

### Infrastructure
- **OpenAPI stability** - Moved `zod-to-openapi` to runtime dependencies for reliable document generation
- **Docker enhancements** - Include changelog in image, run API with pm2, properly copy Drizzle directory
- **CI/CD improvements** - Added screenshot build step with pipeline optimizations

## ğŸ“š Chores

### Documentation
- Clarified changelog hosting architecture and Admin UI data sources
- Dropped changelog plugin from brochure site in favor of generated JSON

### Test Suite
- Enhanced test stability with bumped reload tokens
- Refined screenshot scripts and ignored generated artifacts

### Maintenance
- Fixed changelog generation and formatting scripts
- General tooling improvements and cleanup
